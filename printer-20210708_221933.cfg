## Voron Design VORON2 250/300/350mm SKR 1.4 TMC2209 UART config

## *** THINGS TO CHANGE/CHECK: ***
## MCU paths							[mcu] section
## Thermistor types						[extruder] and [heater_bed] sections - See 'sensor types' list at end of file
## Z Endstop Switch location			[safe_z_home] section
## Homing end position				    [gcode_macro G32] section
## Z Endstop Switch  offset for Z0		[stepper_z] section
## Probe points							[quad_gantry_level] section
## Min & Max gantry corner postions		[quad_gantry_level] section
## PID tune								[extruder] and [heater_bed] sections
## Fine tune E steps					[extruder] section

##========================== Pin Definitions ========================
## X_STEP_PIN         2.2
## X_DIR_PIN          2.6
## X_ENABLE_PIN       2.1
## X_STOP_PIN         1.29
## E0_DET_PIN         1.26
## X_UART_PIN         1.10


## Y_STEP_PIN         0.19
## Y_DIR_PIN          0.20
## Y_ENABLE_PIN       2.8
## Y_STOP_PIN         1.28
## E1_DET_PIN         1.26
## Y_UART_RX          1.9


## Z_STEP_PIN         0.22
## Z_DIR_PIN          2.11
## Z_ENABLE_PIN       0.21
## Z_STOP_PIN         1.27
## PWR_DET_PIN        1.0
## Z_UART             1.8


## E0_STEP_PIN        2.13
## E0_DIR_PIN         0.11
## E0_ENABLE_PIN      2.12
## E0_UART            1.4


## E1_STEP_PIN        1.15
## E1_DIR_PIN         1.14
## E1_ENABLE_PIN      1.16
## E1_UART_RX         1.1


## HE1                2.4    
## HE0                2.7
## BED                2.5
## TH1 (H1 Temp)      0.23
## TH0 (H0 Temp)      0.24
## TB  (Bed Temp)     0.25
## FAN                2.3
## SERVO              2.0
## PROBE			  0.10
##===================================================================

[include client.cfg]
[include client_macros.cfg]

[mcu]
##	MCU for X/Y/E steppers main MCU
##	[X in X] - B Motor
##	[Y in Y] - A Motor
##	[E in E0] - Extruder
##	Obtain definition by "ls -l /dev/serial/by-id/" then unplug to verify
##--------------------------------------------------------------------
serial: /dev/serial/by-id/usb-Klipper_lpc1769_09300018A9846AAF8FFE545EC62000F5-if00
##--------------------------------------------------------------------

[mcu z]
##	MCU for Z steppers
##	[Z in X] - Front Left
##	[Z1 in Y] - Rear Left
##	[Z2 in Z] - Rear Right
##	[Z3 in E0]- Front Right
##	Obtain definition by "ls -l /dev/serial/by-id/" then unplug to verify
##--------------------------------------------------------------------
serial: /dev/serial/by-id/usb-Klipper_lpc1769_1AC0FF0AC0846AAF70CA555EC22000F5-if00
##--------------------------------------------------------------------

[mcu rpi]
##	MCU for RPi4B (Adafruit MAX31865 PT100, Adafruit ADXL345, fan control, lights.
##  Example1: A led strip controlled by the GPIO20 on the RPi
#[output_pin caselight]
#pin: host:gpio20
## You can also write the pin in extended form by specifying the reference gpiochip.
##pin: host:gpiochip0/gpio20
##--------------------------------------------------------------------
serial: /tmp/klipper_host_mcu
##--------------------------------------------------------------------

[printer]
kinematics: corexy
max_velocity: 300  
max_accel: 4000    			    #Max 4000
max_accel_to_decel: 2000        #max_accel/2
max_z_velocity: 20 			    #Max 15 for 12V TMC Drivers, can increase for 24V
max_z_accel: 350
square_corner_velocity: 5.0

#####################################################################
# 	X/Y Stepper Settings
#####################################################################

[stepper_x]
##	Connected to X on mcu_xye (B Motor)
step_pin: P2.2
dir_pin: P2.6
enable_pin: !P2.1
rotation_distance: 40
microsteps: 16
full_steps_per_rotation: 400
endstop_pin: P1.29
position_min: 0
position_endstop: 300
position_max: 300
homing_speed: 80                #Max 100
homing_retract_dist: 5
homing_retract_speed: 20
second_homing_speed: 20
homing_positive_dir: true

[tmc2209 stepper_x]
uart_pin: P1.10
interpolate: True
run_current: 1.1
hold_current: 0.8
sense_resistor: 0.110
stealthchop_threshold: 0

[stepper_y]
##	Connected to Y on mcu_xye (A Motor)
step_pin: P0.19
dir_pin: P0.20
enable_pin: !P2.8
rotation_distance: 40
microsteps: 16
full_steps_per_rotation: 400
endstop_pin: P1.28
position_min: 0
position_endstop: 308
position_max: 308
homing_speed: 80                #Max 100
homing_retract_dist: 5
homing_retract_speed: 20
second_homing_speed: 20
homing_positive_dir: true

[tmc2209 stepper_y]
uart_pin: P1.9
interpolate: True
run_current: 1.1
hold_current: 0.8
sense_resistor: 0.110
stealthchop_threshold: 0
 
#####################################################################
# 	Z Stepper Settings
#####################################################################

## Z MCU - In X Position
## Z0 Stepper - Front Left
[stepper_z]
step_pin: z:P2.2
dir_pin: z:P2.6
enable_pin: !z:P2.1
rotation_distance: 40
gear_ratio: 80:16
microsteps: 16
endstop_pin: z:P1.27
position_endstop: -0.100        #Z-position of nozzle (in mm) to z-endstop trigger point relative to print surface (Z0)
                                #(+) value = endstop above Z0, (-) value = endstop below
                                #Increasing position_endstop brings nozzle closer to the bed. After you run Z_ENDSTOP_CALIBRATE, position_endstop will be stored at the very end of your config
position_max: 275
position_min: -2
homing_speed: 8
second_homing_speed: 3
homing_retract_dist: 3

[tmc2209 stepper_z]
uart_pin: z:P1.10
interpolate: true
run_current: 1.0
hold_current: 1.0
sense_resistor: 0.110
stealthchop_threshold: 0

##	Z MCU - In Y Position
##	Z1 Stepper - Rear Left
[stepper_z1]
step_pin: z:P0.19
dir_pin: !z:P0.20
enable_pin: !z:P2.8
rotation_distance: 40
gear_ratio: 80:16
microsteps: 16

[tmc2209 stepper_z1]
uart_pin: z:P1.9
interpolate: true
run_current: 1.0
hold_current: 1.0
sense_resistor: 0.110
stealthchop_threshold: 0

##	Z MCU - In Z Position
##	Z2 Stepper - Rear Right
[stepper_z2]
step_pin: z:P0.22
dir_pin: z:P2.11
enable_pin: !z:P0.21
rotation_distance: 40
gear_ratio: 80:16
microsteps: 16

[tmc2209 stepper_z2]
uart_pin: z:P1.8
interpolate: true
run_current: 1.0
hold_current: 1.0
sense_resistor: 0.110
stealthchop_threshold: 0

##	Z MCU - In E0 Position
##	Z3 Stepper - Front Right
[stepper_z3]
step_pin: z:P2.13
dir_pin: !z:P0.11
enable_pin: !z:P2.12
rotation_distance: 40
gear_ratio: 80:16
microsteps: 16

[tmc2209 stepper_z3]
uart_pin: z:P1.4
interpolate: true
run_current: 1.0
hold_current: 1.0
sense_resistor: 0.110
stealthchop_threshold: 0


#####################################################################
# 	Extruder
#####################################################################

#	E0 on MCU X/Y
[extruder]
step_pin: P2.13
dir_pin: P0.11
enable_pin: !P2.12
##	rotation_distance = <actual_extrude_distance> / <expected_extrude_distance> * <previous_rotation_distance>
rotation_distance: 22.2738522 #21.83711  ##22.6789511
gear_ratio: 50:17				    ; BMG Gear Ratio
microsteps: 16
full_steps_per_rotation: 200	    ; 200 for 1.8 degree, 400 for 0.9 degree
nozzle_diameter: 0.400
filament_diameter: 1.75
max_extrude_only_distance: 100.0
heater_pin: P2.7

sensor_type: MAX31865
sensor_pin: rpi:gpio7
spi_speed: 4000000
spi_software_sclk_pin: rpi:gpio21
spi_software_mosi_pin: rpi:gpio20
spi_software_miso_pin: rpi:gpio19 
rtd_nominal_r: 100
rtd_reference_r: 430 
rtd_num_of_wires: 3

min_temp: 10
max_temp: 270
max_power: 1.0
min_extrude_temp: 170
#control = pid
#pid_kp = 26.213
#pid_ki = 1.304
#pid_kd = 131.721
pressure_advance: 0.00
pressure_advance_smooth_time: 0.040

##	E0 on MCU X/Y
[tmc2209 extruder]
uart_pin: P1.4
interpolate: false
run_current: 0.58
hold_current: 0.48
sense_resistor: 0.110
stealthchop_threshold: 0

#####################################################################
# 	Bed Heater
#####################################################################

[heater_bed]
heater_pin: P2.5                            #z:P2.3 (SSR Pin - Z board, Fan Pin)
sensor_type: NTC 100K MGB18-104F39050L32    #NTC 100K beta 3950
sensor_pin: P0.25                           #z:P0.25
max_power: 0.6                              # 600W Heater for 30*30cm bed @ 0.4W/cm^2
min_temp: 0
max_temp: 120
#control: pid
#pid_kp: 58.437
#pid_ki: 2.347
#pid_kd: 363.769

#####################################################################
# 	Probe
#####################################################################

[probe]
pin: ^z:P0.10
x_offset: 0
y_offset: 25.0
z_offset: 0
speed: 8.0
lift_speed: 15      
samples: 3
samples_result: median
sample_retract_dist: 3.0
samples_tolerance: 0.006
samples_tolerance_retries: 3

#[homing_heaters]
#steppers: stepper_z
#heaters: heater_bed
#   A comma separated list of steppers that should cause heaters to be
#   disabled. The default is to disable heaters for any homing/probing
#   move. Typical example: stepper_z

#   A comma separated list of heaters to disable during homing/probing
#   moves. The default is to disable all heaters. Typical example: extruder, heater_bed

#####################################################################
# 	Fan Control
#####################################################################

[heater_fan hotend_fan]                     ; Hotend Fan - XYE board, HE1 Connector
pin: P2.4
max_power: 1.0
kick_start_time: 0.5
heater: extruder
heater_temp: 50.0
fan_speed: 1.0                              ; If you are experiencing back flow, you can reduce fan_speed

[fan]                                       ; Print Cooling Fan - XYE board, Fan Pin
pin: P2.3
kick_start_time: 0.5                        ; (depending on your fan, you may need to increase this value if your fan will not start. Can change cycle_time (increase) if your fan is not able to slow down effectively)
off_below: 0.10

[controller_fan electronics_fan]
pin: z:P2.4
max_power: 1.0
shutdown_speed: 0
cycle_time: 0.011
kick_start_time: 1.00
fan_speed: 0.5
idle_timeout: 60
heater: heater_bed

#[heater_fan controller_fan]                 ; Controller fan - Z board, HE1 Connector
#pin: z:P2.4
#max_power: 1.0
#cycle_time: 0.010
#kick_start_time: 1.00
#fan_speed: 0.6
#heater: heater_bed
#heater_temp: 45.0

[temperature_fan pi_fan]
pin: rpi:gpio18
max_power: 1.0
shutdown_speed: 1.0
cycle_time: 0.011
hardware_pwm: false
kick_start_time: 1.0
off_below: 0.4
sensor_type:temperature_host
control: pid
pid_Kp: 30
pid_Ki: 0.5
pid_Kd: 1
#pid_deriv_time:
#pid_integral_max:
min_temp: 0
max_temp: 80
target_temp: 40.0
max_speed: 1.0
min_speed: .4
gcode_id: H

[fan_generic exhaust_fan]
pin: rpi:gpio26
max_power: 1.0
shutdown_speed: 0.0
cycle_time: 0.010
kick_start_time: 5.0

[delayed_gcode STOP_EXHAUST_FAN]
gcode:
    SET_FAN_SPEED FAN=exhaust_fan SPEED=0.0

[fan_generic nevermore]
pin: z:P2.7
max_power: 1.0
shutdown_speed: 0.0
cycle_time: 0.010
kick_start_time: 5.0

[delayed_gcode STOP_NEVERMORE]
gcode:
    SET_FAN_SPEED FAN=nevermore SPEED=0.0


#[heater_fan exhaust_fan]
#pin: rpi:gpio26
#max_power: 1.0
#shutdown_speed: 0.0
#kick_start_time: 5.0
#heater: heater_bed
#heater_temp: 60
#fan_speed: 1.0

#####################################################################
# 	Chamber Temperature
#####################################################################

[thermistor chamber_temp]
temperature1: 25
resistance1: 10000
beta: 3950

[temperature_sensor chamber]
sensor_type: chamber_temp
sensor_pin: P0.23
min_temp: 10
max_temp: 100
gcode_id: C

[temperature_sensor raspberry_pi]
sensor_type: temperature_host
min_temp: 10
max_temp: 100

#####################################################################
# 	LED Control
#####################################################################

[output_pin caselight]                      ; Chamber Lighting - Bed Connector (Optional)
pin: z:P2.5
pwm:true
cycle_time: 0.01
shutdown_value: 0
value:1

[gcode_macro TOGGLE_CASELIGHT]
gcode:
  SET_PIN PIN=caselight VALUE={(not printer['output_pin caselight'].value)|int}

#[gcode_macro lights_on]
#gcode:
#    SET_PIN PIN=caselight VALUE=1.0

#[gcode_macro lights_off]
#gcode:
#    SET_PIN PIN=caselight VALUE=0.0

#####################################################################
#   ADXL345 Accelerometer (Input Shaper) https://www.klipper3d.org/Measuring_Resonances.html
#####################################################################

[adxl345]
cs_pin: rpi:None
axes_map: z,x,y     #x,y,z

[resonance_tester]
accel_chip: adxl345
probe_points:
    150,150,20

[input_shaper]
shaper_type_x = mzv
shaper_freq_x = 50.0    #47.2
shaper_type_y = ei      #2hump_ei#mzv
shaper_freq_y = 36.8    #42.6#30.2

#####################################################################
# 	Homing and Gantry Adjustment Routines
#####################################################################

[idle_timeout]
timeout: 1800

[safe_z_home]
home_xy_position:207,308
speed:100
z_hop:10
z_hop_speed: 20.0

[quad_gantry_level]
gantry_corners:
    -55,4
    355,375 
#-60,-10
#360,370
points:
	50,25
	50,225
	250,225
	250,25
speed: 180
horizontal_move_z: 5
retries: 5
retry_tolerance: 0.0075
max_adjust: 10

[bed_mesh]
speed: 80
horizontal_move_z: 5
mesh_min: 30,30
mesh_max: 270,270
probe_count: 5,5
algorithm: bicubic
relative_reference_index: 12        ; example 7x7: [(7x7)-1] / 2 = 24 or 5x5: [(5x5)-1] / 2 = 12
fade_start: 1
fade_end: 10
fade_target: 0
move_check_distance: 3.0           ; The distance (in mm) along a move to check for split_delta_z. This is also the minimum length that a move can be split. Default is 5.0.
split_delta_z: 0.01                ; split_delta_z: 0.0125 #The amount of Z difference (in mm) along a move that will trigger a split. Default is .025.
mesh_pps: 4                      ; A comma separated pair of integers (X,Y) defining the number of points per segment to interpolate in the mesh along each axis. A "segment" can be defined as the space between each probedpoint. The user may enter a single value which will be applied to both axes.  Default is 2,2.
bicubic_tension: 0.2               ; When using the bicubic algorithm the tension parameter above may be applied to change the amount of slope interpolated. Larger numbers will increase the amount of slope, which results in more curvature in the mesh. Default is 0.2.

#####################################################################
# 	Displays
#####################################################################

[include klipper-mini12864.cfg]

#[neopixel fysetc_mini12864]
##	To control Neopixel RGB in mini12864 display
#pin: z:P1.21
#chain_count: 3
#initial_RED: 0.1
#initial_GREEN: 0.5
#initial_BLUE: 0.0
#color_order: RGB

##	Set RGB values on boot up for each Neopixel. 
##	Index 1 = display, Index 2 and 3 = Knob
#[delayed_gcode setdisplayneopixel]
#initial_duration: 1
#gcode:
#        SET_LED LED=fysetc_mini12864 RED=1 GREEN=1 BLUE=1 INDEX=1 TRANSMIT=0
#        SET_LED LED=fysetc_mini12864 RED=1 GREEN=0 BLUE=0 INDEX=2 TRANSMIT=0
#        SET_LED LED=fysetc_mini12864 RED=1 GREEN=0 BLUE=0 INDEX=3 

#####################################################################
# 	Macros
#####################################################################

[include nozzle_scrub.cfg]

[delayed_gcode DISABLE_MOTORS]
gcode:
    M18


[gcode_macro G32]
gcode:
    BED_MESH_CLEAR
    _CG28
    QUAD_GANTRY_LEVEL
    G28 Z
    #G0 X150 Y150 Z30 F3600


[gcode_macro START_PRINT] 
gcode:
    {% set BED_TEMP = params.BED|float %}
    {% set EXTRUDER_TEMP = params.EXTRUDER|float %}
    SET_GCODE_OFFSET Z=0.0         ; Reset the G-Code Z offset (adjust Z offset if needed)
    BED_MESH_CLEAR                 ; Clear Mesh State
    G21                            ; Set units to millimeters
    G90                            ; Use absolute coordinates
    M83                            ; Use relative distances for extrusion
    M107                           ; Turn off part fan
    M220 S100                      ; Reset speed to 100%
    M221 S100                      ; Reset flow to 100%
    _CG28                          ; Home if not already homed
    M117 Preheating...
    #{% if printer.extruder.temperature < 180 %}
    M104 S180                      ; Preheat nozzle
    #{% endif %}
    M190 S{BED_TEMP}               ; Wait for bed to reach first layer temperature
    HEAT_SOAK                      ; Run heat soak macro
    M106 S64                       ; Set part fan to 25%
    M109 S{EXTRUDER_TEMP}          ; Set and wait for nozzle to reach temperature
    G4 P120000                     ; Wait 120s
    G32                            ; Home all axes and perform QGL
    BED_MESH_CALIBRATE             ; Perform bed mesh probing
    BED_MESH_PROFILE SAVE=CURRENT
    BED_MESH_PROFILE LOAD=CURRENT
    G1 X30 Y309 F10000             ; Move to purge bucket ##next to Z endstop position
    clean_nozzle                   ; Run nozzle purging/cleaning macro
    G28 Z                          ; Home Z with hot nozzle
    M117 Printing...
    
    #G1 Z-2 F3000
    #PRIME_LINE                    ; Run prime line macro
    

[gcode_macro START_PRINT_NO_HEATSOAK] 
gcode:
    {% set BED_TEMP = params.BED|float %}
    {% set EXTRUDER_TEMP = params.EXTRUDER|float %}
    SET_GCODE_OFFSET Z=0.0         ; Reset the G-Code Z offset (adjust Z offset if needed)
    BED_MESH_CLEAR                 ; Clear Mesh State
    G21                            ; Set units to millimeters
    G90                            ; Use absolute coordinates
    M83                            ; Use relative distances for extrusion
    M107                           ; Turn off part fan
    M220 S100                      ; Reset speed to 100%
    M221 S100                      ; Reset flow to 100%
    _CG28                          ; Home if not already homed
    M117 Preheating...
    #{% if printer.extruder.temperature < 180 %}
    M104 S180                      ; Preheat nozzle
    #{% endif %}
    M190 S{BED_TEMP}               ; Wait for bed to reach first layer temperature
    #HEAT_SOAK                      ; Run heat soak macro
    G32                            ; Home all axes and perform QGL
    BED_MESH_CALIBRATE             ; Perform bed mesh probing
    #BED_MESH_PROFILE SAVE=CURRENT
    #BED_MESH_PROFILE LOAD=1
    G1 X200 Y309 F10000            ; Move next to Z endstop position
    M109 S{EXTRUDER_TEMP}          ; Set and wait for nozzle to reach temperature
    G1 Z-2 F3000
    G28 Z                          ; Home Z with hot nozzle
    PRIME_LINE                     ; Run prime line macro
    #NOZZLE_PURGE                  ; Run purge macro
    M117 Print beginning...

[gcode_macro START_PRINT_NO_MESH] 
gcode:
    {% set BED_TEMP = params.BED|float %}
    {% set EXTRUDER_TEMP = params.EXTRUDER|float %}
    SET_GCODE_OFFSET Z=0.0         ; Reset the G-Code Z offset (adjust Z offset if needed)
    BED_MESH_CLEAR                 ; Clear Mesh State
    G21                            ; Set units to millimeters
    G90                            ; Use absolute coordinates
    M83                            ; Use relative distances for extrusion
    M107                           ; Turn off part fan
    M220 S100                      ; Reset speed to 100%
    M221 S100                      ; Reset flow to 100%
    _CG28                          ; Home if not already homed
    M117 Preheating...
    #{% if printer.extruder.temperature < 180 %}
    M104 S180                      ; Preheat nozzle
    #{% endif %}
    M190 S{BED_TEMP}               ; Wait for bed to reach first layer temperature
    HEAT_SOAK                      ; Run heat soak macro
    G32                            ; Home all axes and perform QGL
    #BED_MESH_CALIBRATE             ; Perform bed mesh probing
    #BED_MESH_PROFILE SAVE=CURRENT
    #BED_MESH_PROFILE LOAD=1
    G1 X200 Y309 F10000            ; Move next to Z endstop position
    M109 S{EXTRUDER_TEMP}          ; Set and wait for nozzle to reach temperature
    G1 Z-2 F3000
    G28 Z                          ; Home Z with hot nozzle
    PRIME_LINE                     ; Run prime line macro
    #NOZZLE_PURGE                  ; Run purge macro
    M117 Print beginning...

[gcode_macro END_PRINT]
gcode:
    M400                           ; wait for buffer to clear
    G92 E0                         ; zero the extruder
    G1 E-10.0 F3600                ; retract filament
    G91                            ; relative positioning
    G0 Z1.00 X20.0 Y20.0 F20000    ; move nozzle to remove stringing
    TURN_OFF_HEATERS
    M107                           ; turn off fan
    G1 Z2 F3000                    ; move nozzle up 2mm
    G90                            ; absolute positioning
    G0  X125 Y300 F3600            ; park nozzle at rear
    BED_MESH_CLEAR
    M18                            ; Disable motors
    M117 Print complete!
    SET_FAN_SPEED FAN=exhaust_fan SPEED=1.0
    UPDATE_DELAYED_GCODE ID=STOP_EXHAUST_FAN DURATION=1200
    #UPDATE_DELAYED_GCODE ID=DISABLE_MOTORS DURATION=600     ; Disable steppers after 10 minutes


[gcode_macro HEAT_SOAK]
gcode:
    M117 Heat soak in progress...
    PARKBED
    #G1 X150 Y150 Z50 F3000        ; Move the nozzle to heat soak position
    M106 S255                      ; Set part fan to full
    TEMPERATURE_WAIT SENSOR="temperature_sensor chamber" MINIMUM=50      ; Wait for chamber temp to reach 45C
    M107                           ; Turn off part fan
    M117 Heat soak complete!


[gcode_macro PRIME_LINE]
gcode: 
    M117 Prime line
    G1 X30 Y309 F5000              ; Move to purge position
    G92 E0
    G1 E20 F300                    ; Purge filament
    G92 E0
    G1 Z0.30 F3000
    G1 X30 Y297 F5000              ; Move to prime line start position 
    G1 X130 E8 F1500               ; Draw prime line
    G92 E0


[gcode_macro NOZZLE_PURGE]
gcode: 
    M117 Purging nozzle...
    G1 X30 Y309 F5000              ; Move to purge position
    G92 E0
    G1 E20 F300                    ; Purge filament
    G92 E0
    G1 Z0.3 F3000
    #G1 X30 Y295 F5000             ; Move to prime line start position 
    #G1 X130 E10 F1500             ; Draw prime line
    #G92 E0


[gcode_macro M600]                 ; Filament Change. The print can be resumed with the "RESUME" gcode.
gcode:
    {% set X = params.X|default(50)|float %}
    {% set Y = params.Y|default(0)|float %}
    {% set Z = params.Z|default(10)|float %}
    SAVE_GCODE_STATE NAME=M600_state
    PAUSE
    G91
    G1 E-.8 F2700
    G1 Z{Z}
    G90
    G1 X{X} Y{Y} F3000
    G91
    G1 E-90 F1000
    RESTORE_GCODE_STATE NAME=M600_state
    SET_IDLE_TIMEOUT TIMEOUT=43200 ; Set timeout to 12 hours


[gcode_macro _CG28]                ; Conditional G28 (home if not already homed)
gcode:
    {% if "xyz" not in printer.toolhead.homed_axes %}
        G28
    {% endif %}
	
	
[gcode_macro PARKFRONT]
gcode:
    _CG28                                                                                                                          ; home if not already homed
    SAVE_GCODE_STATE NAME=PARKFRONT
    G90                                                                                                                            ; absolute positioning
    G0 X{printer.toolhead.axis_maximum.x/2} Y{printer.toolhead.axis_minimum.y+10} Z{printer.toolhead.axis_maximum.z/2} F18000      ; park front center, center Z
    RESTORE_GCODE_STATE NAME=PARKFRONT
    

[gcode_macro PARKFRONTLOW]
gcode:
    _CG28                                                                                                                          ; home if not already homed
    SAVE_GCODE_STATE NAME=PARKFRONT
    G90                                                                                                                            ; absolute positioning
    G0 X{printer.toolhead.axis_maximum.x/2} Y{printer.toolhead.axis_minimum.y+10} Z50 F18000                                       ; park front center, 50mm up
    RESTORE_GCODE_STATE NAME=PARKFRONT
    

[gcode_macro PARKREAR]
gcode:
    _CG28                                                                                                                          ; home if not already homed
    SAVE_GCODE_STATE NAME=PARKREAR
    G90                                                                                                                            ; absolute positioning
    G0 X{printer.toolhead.axis_minimum.x+10} Y{printer.toolhead.axis_maximum.y-10} Z{printer.toolhead.axis_maximum.z-50} F18000    ; park top rear left
    RESTORE_GCODE_STATE NAME=PARKREAR
    

[gcode_macro PARKCENTER]
gcode:
    _CG28                                                                                                                          ; home if not already homed
    SAVE_GCODE_STATE NAME=PARKCENTER
    G90                                                                                                                            ; absolute positioning
    G0 X{printer.toolhead.axis_maximum.x/2} Y{printer.toolhead.axis_maximum.y/2} Z{printer.toolhead.axis_maximum.z/2} F18000       ; park center of build volume
    RESTORE_GCODE_STATE NAME=PARKCENTER
    

[gcode_macro PARKBED]
gcode:
    _CG28                                                                                                                          ; home if not already homed
    SAVE_GCODE_STATE NAME=PARKBED
    G90                                                                                                                            ; absolute positioning
    G0 X{printer.toolhead.axis_maximum.x/2} Y{printer.toolhead.axis_maximum.y/2} Z10 F18000                                        ; park 10mm above center of bed
    RESTORE_GCODE_STATE NAME=PARKBED


## 	Thermistor Types
##   "EPCOS 100K B57560G104F"
##   "ATC Semitec 104GT-2"
##   "NTC 100K beta 3950"
##   "Honeywell 100K 135-104LAG-J01"
##   "NTC 100K MGB18-104F39050L32" (Keenovo Heater Pad)
##   "AD595"
##   "PT100 INA826"

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [bed_mesh first cold mesh]
#*# version = 1
#*# points =
#*# 	0.090000, 0.090000, 0.117500, 0.115000, 0.087500, 0.082500, 0.065000
#*# 	0.030000, 0.030000, 0.060000, 0.070000, 0.057500, 0.047500, 0.022500
#*# 	0.017500, 0.002500, 0.015000, 0.020000, 0.030000, 0.027500, -0.010000
#*# 	0.025000, -0.012500, -0.012500, 0.000000, 0.010000, 0.015000, -0.037500
#*# 	0.047500, 0.010000, -0.005000, 0.005000, 0.020000, 0.025000, -0.037500
#*# 	0.075000, 0.035000, 0.020000, 0.030000, 0.042500, 0.055000, -0.007500
#*# 	0.087500, 0.052500, 0.052500, 0.052500, 0.067500, 0.075000, 0.015000
#*# tension = 0.2
#*# min_x = 10.0
#*# algo = bicubic
#*# y_count = 7
#*# mesh_y_pps = 4
#*# min_y = 30.0
#*# x_count = 7
#*# max_y = 270.0
#*# mesh_x_pps = 4
#*# max_x = 289.96
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 25.398
#*# pid_ki = 1.399
#*# pid_kd = 115.241
#*#
#*# [heater_bed]
#*# control = pid
#*# pid_kp = 37.736
#*# pid_ki = 1.471
#*# pid_kd = 241.982
#*#
#*# [bed_mesh first hot mesh]
#*# version = 1
#*# points =
#*# 	0.085000, 0.082500, 0.110000, 0.107500, 0.082500, 0.072500, 0.050000
#*# 	0.032500, 0.030000, 0.065000, 0.070000, 0.055000, 0.042500, 0.010000
#*# 	0.027500, 0.007500, 0.027500, 0.022500, 0.025000, 0.022500, -0.025000
#*# 	0.032500, -0.007500, -0.005000, 0.000000, 0.002500, 0.007500, -0.057500
#*# 	0.055000, 0.015000, -0.000000, 0.007500, 0.015000, 0.017500, -0.057500
#*# 	0.065000, 0.027500, 0.012500, 0.025000, 0.030000, 0.040000, -0.032500
#*# 	0.072500, 0.040000, 0.040000, 0.047500, 0.055000, 0.062500, -0.005000
#*# tension = 0.2
#*# mesh_x_pps = 4
#*# algo = bicubic
#*# min_x = 10.0
#*# min_y = 30.0
#*# y_count = 7
#*# mesh_y_pps = 4
#*# x_count = 7
#*# max_x = 289.96
#*# max_y = 270.0
#*#
#*# [bed_mesh first enclosed mesh]
#*# version = 1
#*# points =
#*# 	0.115000, 0.117500, 0.137500, 0.132500, 0.107500, 0.092500, -0.010000
#*# 	0.097500, 0.070000, 0.087500, 0.085000, 0.077500, 0.080000, 0.067500
#*# 	0.080000, 0.037500, 0.042500, 0.030000, 0.042500, 0.057500, 0.037500
#*# 	0.080000, 0.015000, -0.000000, 0.000000, 0.012500, 0.035000, 0.000000
#*# 	0.105000, 0.040000, 0.007500, 0.010000, 0.022500, 0.045000, -0.005000
#*# 	0.125000, 0.060000, 0.030000, 0.035000, 0.047500, 0.075000, 0.025000
#*# 	0.152500, 0.090000, 0.072500, 0.067500, 0.080000, 0.100000, 0.052500
#*# tension = 0.2
#*# min_x = 10.0
#*# algo = bicubic
#*# y_count = 7
#*# mesh_y_pps = 4
#*# min_y = 30.0
#*# x_count = 7
#*# max_y = 270.0
#*# mesh_x_pps = 4
#*# max_x = 289.96
#*#
#*# [bed_mesh 1]
#*# version = 1
#*# points =
#*# 	0.145000, 0.132500, 0.155000, 0.147500, 0.125000, 0.122500, 0.100000
#*# 	0.077500, 0.067500, 0.092500, 0.097500, 0.085000, 0.082500, 0.060000
#*# 	0.060000, 0.027500, 0.037500, 0.032500, 0.040000, 0.050000, 0.015000
#*# 	0.052500, -0.000000, -0.005000, 0.000000, 0.010000, 0.025000, -0.020000
#*# 	0.075000, 0.022500, -0.002500, 0.007500, 0.017500, 0.032500, -0.030000
#*# 	0.092500, 0.042500, 0.022500, 0.035000, 0.042500, 0.062500, 0.002500
#*# 	0.117500, 0.075000, 0.065000, 0.070000, 0.077500, 0.090000, 0.032500
#*# tension = 0.2
#*# min_x = 10.0
#*# algo = bicubic
#*# y_count = 7
#*# mesh_y_pps = 4
#*# min_y = 30.0
#*# x_count = 7
#*# max_y = 270.0
#*# mesh_x_pps = 4
#*# max_x = 289.96
#*#
#*# [bed_mesh enclosed mesh after rebuild]
#*# version = 1
#*# points =
#*# 	0.110000, 0.105000, 0.105000, 0.072500, 0.072500
#*# 	0.045000, 0.042500, 0.052500, 0.037500, 0.012500
#*# 	0.062500, 0.015000, 0.000000, -0.000000, -0.047500
#*# 	0.077500, 0.022500, 0.020000, 0.022500, -0.025000
#*# 	0.110000, 0.070000, 0.062500, 0.062500, 0.007500
#*# tension = 0.2
#*# min_x = 10.0
#*# algo = bicubic
#*# y_count = 5
#*# mesh_y_pps = 4
#*# min_y = 30.0
#*# x_count = 5
#*# max_y = 270.0
#*# mesh_x_pps = 4
#*# max_x = 290.0
#*#
#*# [bed_mesh enclosed mesh after 2nd rebuild (with extrusion swaps)]
#*# version = 1
#*# points =
#*# 	0.222500, 0.182500, 0.175000, 0.160000, 0.187500
#*# 	0.120000, 0.075000, 0.075000, 0.075000, 0.082500
#*# 	0.110000, 0.025000, 0.000000, 0.017500, 0.005000
#*# 	0.152500, 0.057500, 0.040000, 0.060000, 0.042500
#*# 	0.225000, 0.152500, 0.130000, 0.150000, 0.132500
#*# tension = 0.2
#*# min_x = 10.0
#*# algo = bicubic
#*# y_count = 5
#*# mesh_y_pps = 4
#*# min_y = 30.0
#*# x_count = 5
#*# max_y = 270.0
#*# mesh_x_pps = 4
#*# max_x = 290.0
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  0.190000, 0.182500, 0.172500, 0.162500, 0.195000
#*# 	  0.102500, 0.077500, 0.070000, 0.075000, 0.097500
#*# 	  0.077500, 0.022500, 0.000000, 0.017500, 0.032500
#*# 	  0.122500, 0.050000, 0.040000, 0.055000, 0.072500
#*# 	  0.202500, 0.150000, 0.135000, 0.145000, 0.157500
#*# tension = 0.2
#*# min_x = 30.0
#*# algo = bicubic
#*# y_count = 5
#*# mesh_y_pps = 4
#*# min_y = 30.0
#*# x_count = 5
#*# max_y = 270.0
#*# mesh_x_pps = 4
#*# max_x = 270.0
#*#
#*# [bed_mesh Heat soak mesh after pins mod]
#*# version = 1
#*# points =
#*# 	  0.190000, 0.182500, 0.172500, 0.162500, 0.195000
#*# 	  0.102500, 0.077500, 0.070000, 0.075000, 0.097500
#*# 	  0.077500, 0.022500, 0.000000, 0.017500, 0.032500
#*# 	  0.122500, 0.050000, 0.040000, 0.055000, 0.072500
#*# 	  0.202500, 0.150000, 0.135000, 0.145000, 0.157500
#*# tension = 0.2
#*# min_x = 30.0
#*# algo = bicubic
#*# y_count = 5
#*# mesh_y_pps = 4
#*# min_y = 30.0
#*# x_count = 5
#*# max_y = 270.0
#*# mesh_x_pps = 4
#*# max_x = 270.0
